<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Dashboard Delegates</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="./assets/vendors/mdi/css/materialdesignicons.min.css" />
    <link rel="stylesheet" href="./assets/vendors/css/vendor.bundle.base.css" />
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous" />
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet"
        href="https://res.cloudinary.com/kabupaten-sukoharjo/raw/upload/v1657587189/style_n6b4x3.css" />
    <!-- End layout styles -->
    <link rel="shortcut icon" href="./assets/images/favicon.png" />
    <style>
        body {
            background: linear-gradient(to bottom, #390967, #7c0ce5);
            font-family: "Poppins", sans-serif;
        }

        .login,
        .image {
            min-height: 100vh;
        }

        .bg-image {
            background-image: url(./assets/images/2959.png);
            background-size: cover;
            background-position: center center;
        }

        .form-group input {
            background: transparent;
            border-radius: 10px;
            font-weight: bold;
        }

        .btn-login {
            background: linear-gradient(#fd749b -13.56%, #281ac8 158.3%);
            padding: 0.7rem 0rem;
            border-radius: 2rem;
            border: none;
            outline: none;
        }

        .btn-login:hover {
            box-shadow: 0 3px 10px rgb(0 0 0 / 0.2);
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <div class="row no-gutter">
            <!-- The image half -->
            <div class="col-md-7 d-none d-md-flex bg-image">
                <h1 class="fw-bold d-flex align-items-center justify-content-center" style="
              font-size: 60px;
              text-shadow: 2px 2px 8px #c4b6b6;
              letter-spacing: 1px;
            ">
                    FUTURE
                    <br />
                    LEADER
                    <br />
                    SUMMIT 2022
                </h1>
            </div>

            <!-- The content half -->
            <div class="col-md-5">
                <div class="login d-flex align-items-center py-5">
                    <!-- Demo content-->
                    <div class="container text-center">
                        <div class="row">
                            <div class="col-lg-10 col-xl-7 mx-auto">
                                <a href="">&lt; Back to Homepage</a>
                                <h3 class="card-title my-3 fw-bold">Reset Password</h3>
                                <form>
                                    <div class="form-group">
                                        <input type="text" class="form-control p_input border-white email"
                                            placeholder="Email" required />
                                    </div>
                                    <div class="form-group">
                                        <input type="text" class="form-control p_input border-white new_pass"
                                            placeholder="New Password" required />
                                    </div>
                                    <div class="form-group">
                                        <input type="text" class="form-control p_input border-white conf_pass"
                                            placeholder="Confirm Password" required />
                                    </div>
                                    <div class="text-center">
                                        <button type="button" onclick="handleResetPassword()"
                                            class="btn btn-login btn-block enter-btn mt-4">
                                            Change
                                        </button>
                                    </div>
                                    <div class="alert alert-success" style="display: none;">
                                        <strong>Success!</strong> <span class="msg-success"></span>
                                    </div>
                                    <p class="terms pt-2" style="font-size: 12px">
                                        By changing an password you are accepting our<a href="#">
                                            Terms & Conditions</a>
                                    </p>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!-- End -->
                </div>
            </div>
            <!-- End -->
        </div>
    </div>

    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="./assets/vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="./assets/js/off-canvas.js"></script>
    <script src="./assets/js/hoverable-collapse.js"></script>
    <script src="./assets/js/misc.js"></script>
    <script src="./assets/js/settings.js"></script>
    <script src="./assets/js/todolist.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
    <script>
        async function handleResetPassword() {
            try {
                let email = document.getElementsByClassName('email')[0]
                let newPass = document.getElementsByClassName('new_pass')[0]
                let confPass = document.getElementsByClassName('conf_pass')[0]

                let res = await axios({
                    url: 'http://203.194.112.187:33041/reset-password',
                    method: 'POST',
                    data: {
                        email: email.value,
                        new_password: newPass.value,
                        confirm_password: confPass.value
                    }
                })

                let alert = document.getElementsByClassName('alert-success')[0]
                let msg = document.getElementsByClassName('msg-success')[0]
                msg.innerHTML = res.data.message
                alert.style.display = 'block'

                setTimeout(() => {
                    if (res.status == 200) window.open('./login.html', '_self')
                }, 2000);

            } catch (error) {
                console.log(error)
            }
        }
    </script>
    <!-- endinject -->
</body>

</html>
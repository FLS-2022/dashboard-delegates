<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Dashboard Delegates</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="../../assets/vendors/mdi/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="../../assets/vendors/css/vendor.bundle.base.css">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet"
        href="https://res.cloudinary.com/kabupaten-sukoharjo/raw/upload/v1657587189/style_n6b4x3.css">
    <!-- End layout styles -->
    <link
        href="https://fonts.googleapis.com/css2?family=Overpass:ital,wght@0,100;0,200;0,300;0,400;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <link rel="shortcut icon" href="../../assets/images/favicon.png" />
    <link rel="stylesheet" href="../../assets/additional/css/feather.css">
    <link rel="stylesheet" href="../../assets/additional/css/uppy.min.css">
    <link rel="stylesheet" href="../../assets/additional/css/dataTables.bootstrap4.css">
    <style>
        .main-panel .content-wrapper .card .card-body .table-responsive .aprovee {
            padding-left: 125px !important;
            padding-right: 125px !important;
        }
    </style>
</head>

<body>
    <div class="container-scroller">
        <!-- partial:../../partials/_sidebar.html -->
        <nav class="sidebar sidebar-offcanvas" id="sidebar">
            <div class="sidebar-brand-wrapper d-none d-lg-flex align-items-center justify-content-center fixed-top">
                <a class="sidebar-brand brand-logo" href="index.html"><img src="../../assets/images/logox.png"
                        alt="logo" /></a>
                <a class="sidebar-brand brand-logo-mini" href="index.html"><img src="../../assets/images/logox_mini.png"
                        alt="logo" /></a>
            </div>
            <ul class="nav">
                <li class="nav-item profile">
                    <div class="profile-desc">
                        <div class="profile-pic">
                            <div class="count-indicator">
                                <img class="img-xs rounded-circle " src="../../assets/images/faces/face12.jpg" alt="">
                                <span class="count bg-success"></span>
                            </div>
                            <div class="profile-name">
                                <h5 class="mb-0 font-weight-normal usr-profile">-</h5>
                                <span>Delegates</span>
                            </div>
                        </div>
                        <a href="#" id="profile-dropdown" data-toggle="dropdown"><i
                                class="mdi mdi-dots-vertical"></i></a>
                        <div class="dropdown-menu dropdown-menu-right sidebar-dropdown preview-list"
                            aria-labelledby="profile-dropdown">
                            <!-- <a href="#" class="dropdown-item preview-item">
                <div class="preview-thumbnail">
                  <div class="preview-icon bg-dark rounded-circle">
                    <i class="mdi mdi-settings text-primary"></i>
                  </div>
                </div>
                <div class="preview-item-content">
                  <p class="preview-subject ellipsis mb-1 text-small">Account settings</p>
                </div>
              </a> -->
                            <div class="dropdown-divider"></div>
                            <a href="../../resetpassword.html" class="dropdown-item preview-item">
                                <div class="preview-thumbnail">
                                    <div class="preview-icon bg-dark rounded-circle">
                                        <i class="mdi mdi-onepassword  text-info"></i>
                                    </div>
                                </div>
                                <div class="preview-item-content">
                                    <p class="preview-subject ellipsis mb-1 text-small">Change Password</p>
                                </div>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="../../index.html#ToDoList_" class="dropdown-item preview-item">
                                <div class="preview-thumbnail">
                                    <div class="preview-icon bg-dark rounded-circle">
                                        <i class="mdi mdi-calendar-today text-success"></i>
                                    </div>
                                </div>
                                <div class="preview-item-content">
                                    <p class="preview-subject ellipsis mb-1 text-small">To-do list</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </li>
                <li class="nav-item nav-category">
                    <span class="nav-link">Navigation</span>
                </li>
                <li class="nav-item menu-items">
                    <a class="nav-link" href="../../index.html">
                        <span class="menu-icon">
                            <i class="mdi mdi-speedometer"></i>
                        </span>
                        <span class="menu-title">Dashboard</span>
                    </a>
                </li>
                <li class="nav-item menu-items">
                    <a class="nav-link" data-toggle="collapse" href="#ui-basic" aria-expanded="false"
                        aria-controls="ui-basic">
                        <span class="menu-icon">
                            <i class="mdi mdi-laptop"></i>
                        </span>
                        <span class="menu-title">Events</span>
                        <i class="menu-arrow"></i>
                    </a>
                    <div class="collapse" id="ui-basic">
                        <ul class="nav flex-column sub-menu">
                            <!-- <li class="nav-item"> <a class="nav-link" href="pages/events/main-event.html">Form Registrations</a>
              </li> -->
                            <li class="nav-item"> <a class="nav-link"
                                    href="../../pages/events/timeline.html">Timeline</a>
                            </li>
                            <li class="nav-item"> <a class="nav-link" href="../../pages/events/rooms.html">Rooms</a>
                            </li>
                            <li class="nav-item"> <a class="nav-link"
                                    href="../../pages/events/main-event.html">Delegates Journey</a></li>
                        </ul>
                    </div>
                </li>
                <li class="nav-item menu-items">
                    <a class="nav-link" href="../../pages/forms/delegates_form.html">
                        <span class="menu-icon">
                            <i class="mdi mdi-playlist-play"></i>
                        </span>
                        <span class="menu-title">Form Registrations</span>
                    </a>
                </li>
                <li class="nav-item menu-items">
                    <a class="nav-link" href="../../pages/news/announcement.html">
                        <span class="menu-icon">
                            <i class="mdi mdi-table-large"></i>
                        </span>
                        <span class="menu-title">Announcements</span>
                    </a>
                </li>
                <!-- <li class="nav-item menu-items">
          <a class="nav-link" href="pages/charts/chartjs.html">
            <span class="menu-icon">
              <i class="mdi mdi-chart-bar"></i>
            </span>
            <span class="menu-title">Delegates Journey</span>
          </a>
        </li> -->
                <li class="nav-item menu-items mn-admin">
                    <a class="nav-link" data-toggle="collapse" href="#admin" aria-expanded="false"
                        aria-controls="admin">
                        <span class="menu-icon">
                            <i class="mdi mdi-account-key"></i>
                        </span>
                        <span class="menu-title">Admin</span>
                        <i class="menu-arrow"></i>
                    </a>
                    <div class="collapse" id="admin">
                        <ul class="nav flex-column sub-menu">
                            <li class="nav-item"> <a class="nav-link" href="./admin_project01.html"> Admin
                                    old</a></li>
                            <li class="nav-item"> <a class="nav-link" href="./admin.html"> Data Registrans
                                </a>
                            </li>
                            <li class="nav-item"> <a class="nav-link" href="./wl_validate.html"> Validate WL
                                </a>
                            </li>
                            <li class="nav-item"> <a class="nav-link" href="./payment_validate.html"> Validate Payment
                                </a>
                            </li>
                            <li class="nav-item"> <a class="nav-link" href="./approved.html"> Data Approved
                                </a>
                            </li>
                            <!-- <li class="nav-item"> <a class="nav-link" href="./mdi.html"> Validation </a>
                            </li> -->
                        </ul>
                    </div>
                </li>
                <li class="nav-item menu-items">
                    <a class="nav-link" data-toggle="collapse" href="#auth" aria-expanded="false" aria-controls="auth">
                        <span class="menu-icon">
                            <i class="mdi mdi-security"></i>
                        </span>
                        <span class="menu-title">Help Desk</span>
                        <i class="menu-arrow"></i>
                    </a>
                    <div class="collapse" id="auth">
                        <ul class="nav flex-column sub-menu">
                            <li class="nav-item"> <a class="nav-link" href="../../pages/helpdesk/faq.html"> FAQs
                                </a></li>
                            <li class="nav-item"> <a class="nav-link" href="../../pages/helpdesk/contact.html">
                                    Contact Support </a></li>
                        </ul>
                    </div>
                </li>
                <li class="nav-item menu-items">
                    <a class="nav-link" href="https://drive.google.com/file/d/1ZfxJ30VSCdGw44HPpAbCB57hPedHkJH_/view"
                        target="_blank">
                        <span class="menu-icon">
                            <i class="mdi mdi-file-document-box"></i>
                        </span>
                        <span class="menu-title">Booklet Delegates</span>
                    </a>
                </li>
            </ul>
        </nav>
        <!-- partial -->
        <div class="container-fluid page-body-wrapper">
            <!-- partial:../../partials/_navbar.html -->
            <nav class="navbar p-0 fixed-top d-flex flex-row">
                <div class="navbar-brand-wrapper d-flex d-lg-none align-items-center justify-content-center">
                    <a class="navbar-brand brand-logo-mini" href="../../index.html"><img
                            src="../../assets/images/logo-mini.svg" alt="logo" /></a>
                </div>
                <div class="navbar-menu-wrapper flex-grow d-flex align-items-stretch">
                    <button class="navbar-toggler navbar-toggler align-self-center" type="button"
                        data-toggle="minimize">
                        <span class="mdi mdi-menu"></span>
                    </button>
                    <ul class="navbar-nav w-100">
                        <li class="nav-item w-100">

                            <form class="nav-link mt-2 mt-md-0 d-none d-lg-flex search">
                                <input type="text" class="form-control" placeholder="Welcome to Delegates Dashboard">
                            </form>
                        </li>
                    </ul>
                    <ul class="navbar-nav navbar-nav-right">
                        <li class="nav-item dropdown d-none d-lg-block">
                            <a class="nav-link btn btn-success create-new-button" id="createbuttonDropdown"
                                aria-expanded="false" href="https://futureleadersummit.org/" target="_blank">Go To FLS
                                2022 Homepage</a>

                        </li>
                        <li class="nav-item nav-settings d-none d-lg-block">
                            <a class="nav-link" href="#">
                                <i class="mdi mdi-view-grid"></i>
                            </a>
                        </li>
                        <li class="nav-item dropdown border-left">

                        </li>
                        <li class="nav-item dropdown border-left">
                            <a class="nav-link count-indicator dropdown-toggle" id="notificationDropdown" href="#"
                                data-toggle="dropdown">
                                <i class="mdi mdi-bell"></i>
                                <span class="count bg-danger"></span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list"
                                aria-labelledby="notificationDropdown">
                                <h6 class="p-3 mb-0">Notifications</h6>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item preview-item" href="../../pages/news/announcement.html">
                                    <div class="preview-thumbnail">
                                        <div class="preview-icon bg-dark rounded-circle">
                                            <i class="mdi mdi-calendar text-success"></i>
                                        </div>
                                    </div>
                                    <div class="preview-item-content">
                                        <p class="preview-subject mb-1">Announcements Delegates</p>
                                        <p class="text-muted ellipsis mb-0"> Pengumuman seleksi peserta main event FLS
                                            2022 </p>
                                    </div>
                                </a>
                                <div class="dropdown-divider"></div>

                                <div class="dropdown-divider"></div>

                                <div class="dropdown-divider"></div>
                                <p class="p-3 mb-0 text-center">See all notifications</p>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link" id="profileDropdown" href="#" data-toggle="dropdown">
                                <div class="navbar-profile">
                                    <img class="img-xs rounded-circle" src="../../assets/images/faces/face12.jpg"
                                        alt="">
                                    <p class="mb-0 d-none d-sm-block navbar-profile-name">-</p>
                                    <i class="mdi mdi-menu-down d-none d-sm-block"></i>
                                </div>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list"
                                aria-labelledby="profileDropdown">
                                <h6 class="p-3 mb-0">Profile</h6>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item preview-item">
                                    <div class="preview-thumbnail">
                                        <div class="preview-icon bg-dark rounded-circle">
                                            <i class="mdi mdi-logout text-danger"></i>
                                        </div>
                                    </div>
                                    <div class="preview-item-content">
                                        <p class="preview-subject mb-1" onclick="handleLogout()">Log out</p>
                                    </div>
                                </a>
                                <div class="dropdown-divider"></div>
                                <p class="p-3 mb-0 text-center">Advanced settings</p>
                            </div>
                        </li>
                    </ul>
                    <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button"
                        data-toggle="offcanvas">
                        <span class="mdi mdi-format-line-spacing"></span>
                    </button>
                </div>
            </nav>
            <!-- partial -->
            <div class="main-panel">
                <div class="content-wrapper">
                    <div class="page-header">
                        <h3 class="page-title"> Delegates </h3>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="#">Admin</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Delegates</li>
                            </ol>
                        </nav>
                    </div>
                    <div class="row">
                        <div class="col-lg-12 grid-margin stretch-card">
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="card-title">Data Delegates</h4>
                                    <p class="card-description"> Berisi data registrasi,approve/reject, dan upload
                                        report delegates
                                        <code>PAGE ADMIN</code>
                                    </p>
                                    <div class="row mb-4">
                                        <div class="col-xl-12 col-lg-12 col-12">
                                            <div class="template-demo">
                                                <button type="button" class="btn btn-primary btn-sm">Education</button>
                                                <button type="button"
                                                    class="btn btn-secondary btn-sm">Economics</button>
                                                <button type="button" class="btn btn-success btn-sm">Social &
                                                    Humanity</button>
                                                <button type="button" class="btn btn-danger btn-sm">Renewable
                                                    Energy</button>
                                                <button type="button" class="btn btn-warning btn-sm">Health
                                                    Architecture</button>
                                                <button type="button" class="btn btn-info btn-sm">Urban and Regional
                                                    Planning</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="table-responsive my-table">
                                        <table class="table table-striped datatables" id="dataTable-1">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th> Nama </th>
                                                    <th> Username </th>
                                                    <th> Alamat </th>
                                                    <th> TTL </th>
                                                    <th> Asal Universitas </th>
                                                    <th> Jurusan </th>
                                                    <th> Angkatan</th>
                                                    <th> Room 1</th>
                                                    <th> Room 2</th>
                                                    <th> CV</th>
                                                    <th> Motlet</th>
                                                    <th> Study Case 1</th>
                                                    <th> Study Case 2</th>
                                                    <th> KTM</th>
                                                    <th> E-Sertifikat</th>
                                                    <th class="text-center aprovee"> Approval</th>
                                                    <th class="text-center"> Report</th>
                                                </tr>
                                            </thead>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Modal Upload-->
                        <div class="modal fade" id="verticalModal" tabindex="-1" role="dialog"
                            aria-labelledby="verticalModalTitle" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="verticalModalTitle">
                                            Upload Report Delegates</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <input type="file" name="file-report" class="file-upload-default" required>
                                    </div>
                                    <div class="modal-footer">
                                        <p>Pastikan document yang diupload sudah benar</p>
                                        <button type="button" class="btn mb-2 btn-secondary"
                                            data-dismiss="modal">Cancel</button>
                                        <button type="button" class="btn mb-2 btn-primary"
                                            id="btn-report">Upload</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Modal Approve-->
                        <div class="modal fade" id="approveModal" tabindex="-1" role="dialog"
                            aria-labelledby="verticalModalTitle" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="verticalModalTitle">
                                            Approve Delegates</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <h5>Apakah Anda yakin akan me-Apporove delegates
                                            ini?</h5>
                                    </div>
                                    <div class="modal-footer">
                                        <!-- <p>Pastikan document yang diupload sudah benar</p> -->
                                        <button type="button" class="btn mb-2 btn-secondary"
                                            data-dismiss="modal">Cancel</button>
                                        <button type="button" class="btn mb-2 btn-success"
                                            id="btn-approve">Approve</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Modal Reject-->
                        <div class="modal fade" id="rejectModal" tabindex="-1" role="dialog"
                            aria-labelledby="verticalModalTitle" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="verticalModalTitle">
                                            Reject Delegates</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <h5>Apakah Anda yakin akan meReject delegates
                                            ini?</h5>
                                    </div>
                                    <div class="modal-footer">
                                        <!-- <p>Pastikan document yang diupload sudah benar</p> -->
                                        <button type="button" class="btn mb-2 btn-secondary"
                                            data-dismiss="modal">Cancel</button>
                                        <button type="button" class="btn mb-2 btn-danger"
                                            id="btn-rejected">Reject</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Modal Waiting List-->
                        <div class="modal fade" id="WLModal" tabindex="-1" role="dialog"
                            aria-labelledby="verticalModalTitle" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="verticalModalTitle">
                                            Waiting List Delegates</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <h5>Apakah Anda yakin akan memberikan Waiting List untuk
                                            delegates
                                            ini?</h5>
                                    </div>
                                    <div class="modal-footer">
                                        <!-- <p>Pastikan document yang diupload sudah benar</p> -->
                                        <button type="button" class="btn mb-2 btn-secondary"
                                            data-dismiss="modal">Cancel</button>
                                        <button type="button" class="btn mb-2 btn-info" id="btn-waiting">Waiting
                                            List</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <!-- content-wrapper ends -->
                <!-- partial:../../partials/_footer.html -->
                <footer class="footer">
                    <div class="d-sm-flex justify-content-center justify-content-sm-between">
                        <span class="text-muted d-block text-center text-sm-left d-sm-inline-block">Copyright
                            ©futureleadersummit
                            2022</span>
                        <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center"> <a
                                href="https://instagram.com/flsummit" target="_blank">Future
                                Leader Summit</a> </span>
                    </div>
                </footer>
                <!-- partial -->
            </div>
            <!-- main-panel ends -->
        </div>
        <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="../../assets/vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="../../assets/js/off-canvas.js"></script>
    <script src="../../assets/js/hoverable-collapse.js"></script>
    <script src="../../assets/js/misc.js"></script>
    <script src="../../assets/js/settings.js"></script>
    <script src="../../assets/js/todolist.js"></script>
    <!-- endinject -->
    <!-- Custom js for this page -->
    <!-- End custom js for this page -->
    <script src='../../assets/additional/js/jquery.dataTables.min.js'></script>
    <script src='../../assets/additional/js/dataTables.bootstrap4.min.js'></script>
    <script src='../../assets/additional/js/uppy.min.js'></script>
    <script>
        // $('#dataTable-1').DataTable({
        //     autoWidth: true,
        //     "lengthMenu": [
        //         [16, 32, 64, -1],
        //         [16, 32, 64, "All"]
        //     ],

        // });
    </script>
    <script>
        var uptarg = document.getElementById('drag-drop-area');
        if (uptarg) {
            var uppy = Uppy.Core().use(Uppy.Dashboard, {
                inline: true,
                target: uptarg,
                proudlyDisplayPoweredByUppy: false,
                theme: 'dark',
                width: 770,
                height: 210,
                plugins: ['Webcam']
            }).use(Uppy.Tus, {
                endpoint: 'https://master.tus.io/files/'
            });
            uppy.on('complete', (result) => {
                console.log('Upload complete! We’ve uploaded these files:', result.successful)
            });
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
    <script>
        getUsrProfile(JSON.parse(localStorage.getItem('user')));
        let dataList = []

        $(document).ready(async function () {
            let show = localStorage.getItem('user')
            if (!show) window.open('./login.html', '_self')
            let usrProfile = localStorage.getItem('user')
            usrProfile = JSON.parse(usrProfile)
            console.log('usrProfile', usrProfile)

            let menuAdmin = document.getElementsByClassName('mn-admin')[0]
            menuAdmin.style.display = usrProfile.role_name !== 'ADM' ? 'none' : 'block'

            document.getElementsByClassName('usr-profile')[0].innerHTML = usrProfile.username
            document.getElementsByClassName('navbar-profile-name')[0].innerHTML = usrProfile.username
            await handleGetDataList()
            console.log(dataList)

            let table = $('#dataTable-1').DataTable({
                data: dataList.data,
                columns: [{
                        data: 'number'
                    },
                    {
                        data: 'nama'
                    },
                    {
                        data: 'username'
                    },
                    {
                        data: 'domisili'
                    },
                    {
                        data: 'ttl'
                    },
                    {
                        data: 'asal_univ'
                    },
                    {
                        data: 'jurusan'
                    },
                    {
                        data: 'angkatan'
                    },
                    {
                        data: 'pilihan_room_1'
                    },
                    {
                        data: 'pilihan_room_2'
                    },
                    {
                        data: 'file_cv',
                        render: function (data, type, row) {
                            return '<button type="button" data-id="' + data +
                                '" class="btn btn-primary btn-md" onclick="handleDownload(event)">CV</button>'
                        }
                    },
                    {
                        data: 'file_motlet',
                        render: function (data, type, row) {
                            return '<button type="button" data-id="' + data +
                                '" class="btn btn-primary btn-md" onclick="handleDownload(event)">Motlet</button>'
                        }
                    },
                    {
                        data: 'file_study_case_1',
                        render: function (data, type, row) {
                            return '<button type="button" data-id="' + data +
                                '" class="btn btn-primary btn-md" onclick="handleDownload(event)">Study Case 1</button>'
                        }
                    },
                    {
                        data: 'file_study_case_2',
                        render: function (data, type, row) {
                            return '<button type="button" data-id="' + data +
                                '" class="btn btn-primary btn-md" onclick="handleDownload(event)">Study Case 2</button>'
                        }
                    },
                    {
                        data: 'file_ktm',
                        render: function (data, type, row) {
                            return '<button type="button" data-id="' + data +
                                '" class="btn btn-primary btn-md" onclick="handleDownload(event)">KTM</button>'
                        }
                    },
                    {
                        data: 'file_e_sertifikat',
                        render: function (data, type, row) {
                            return '<button type="button" data-id="' + data +
                                '" class="btn btn-primary btn-md" onclick="handleDownload(event)">E-Sertifikat</button>'
                        }
                    },
                    {
                        data: 'is_approve',
                        render: function (data, type, row) {
                            return `<div class="row text-center">
                                        <div class="col-xl-3 col-lg-3 col-md-3 col-3"
                                            style="margin-right: 18px ;">
                                            <button data-id="${'#approveModal,' + row.id}" type="button" class="btn btn-success btn-md butt" onclick="handleModal(event)">Approve</button>
                                        </div>
                                        <div class="col-xl-3 col-lg-3 col-md-3 col-3"
                                            style="margin-right: 4px ;">
                                            <button type="button" data-id="${'#rejectModal,' + row.id}" class="btn btn-danger btn-md butt" onclick="handleModal(event)">Reject</button>
                                        </div>
                                        <div class="col-xl-3 col-lg-3 col-md-3 col-3">
                                            <button data-id="${'#WLModal,' + row.id}" type="button" class="btn btn-info btn-md" onclick="handleModal(event)">Waiting List</button>
                                        </div>
                                    </div>`
                        }
                    },
                    {
                        data: 'file_report',
                        render: function (data, type, row) {
                            return `<button type="button" data-id="${'#verticalModal,' + row.id}" class="btn btn-warning btn-icon-text" onclick="handleModal(event)"><i
                                            class="mdi mdi-upload btn-icon-prepend"></i> Upload
                                    </button>`
                        }
                    },
                ],
                autoWidth: true,
                "lengthMenu": [
                    [16, 32, 64, -1],
                    [16, 32, 64, "All"]
                ],

            });
            // $('#dataTable-1 tbody').on('click', '#btn-cv', function () {
            //     var data = table.row($(this).parents('tr'))
            //     console.log(data)
            //     // alert(data[0] + "'s salary is: " + data[10]);
            // });
        })

        // setTimeout(async () => {
        // }, 10);

        function handleDownload(e) {
            window.open(e.target.getAttribute('data-id'))
        }

        function handleModal(e) {
            console.log(e.target.getAttribute('data-id'))
            let data = e.target.getAttribute('data-id')
            data = data.split(',')
            if (data[0] == '#approveModal') {
                $('#approveModal').modal('show')
                $('#btn-approve').on('click', async function () {
                    await handleSaveAction(data[1], 'approve')
                    $('#approveModal').modal('hide')
                })
            } else if (data[0] == '#rejectModal') {
                $('#rejectModal').modal('show')
                $('#btn-rejected').on('click', async function () {
                    await handleSaveAction(data[1], 'reject')
                    $('#rejectModal').modal('show')
                })
            } else if (data[0] == '#WLModal') {
                $('#WLModal').modal('show')
                $('#btn-waiting').on('click', async function () {
                    await handleSaveAction(data[1], 'waiting')
                    $('#WLModal').modal('show')
                })
            } else if (data[0] == '#verticalModal') {
                $('#verticalModal').modal('show')
                $('#btn-report').on('click', async function () {
                    await handleSaveAction(data[1], 'file-report')
                    $('#verticalModal').modal('hide')
                })
            }
        }


        function handleLogout() {
            localStorage.clear()
            window.open(`${window.location.origin}/login.html`, '_self')
        }

        async function handleSaveAction(id, event) {
            try {
                console.log(id, event)
                var fileReport = document.getElementsByName('file-report')[0]
                let formData = new FormData()
                formData.append('id', id)
                formData.append('file_report', fileReport.files[0])
                let res = await axios({
                    url: 'https://api.futureleadersummit.org/action-registration/' + event,
                    method: 'POST',
                    headers: {
                        'Content-Type': 'multipart/form-data'
                    },
                    data: formData
                })
                console.log(res.data)
                return res.data
            } catch (error) {
                console.error(error)
            }
        }

        async function handleGetDataList() {
            try {
                let res = await axios({
                    url: 'https://api.futureleadersummit.org/data-list',
                    method: 'GET'
                })
                dataList = res.data
            } catch (error) {
                console.error(error)
            }
        }

        async function getUsrProfile(usrProfile) {
            try {
                let res = await axios({
                url: 'https://api.futureleadersummit.org/user-profile',
                method: 'POST',
                data: {
                    user_id: usrProfile.id
                }
                })
                localStorage.setItem('user', JSON.stringify(res.data))
                return res.data
            } catch (error) {
                window.open(`${window.location.origin}/index.html`, '_self')
            }
        }
    </script>
</body>

</html>